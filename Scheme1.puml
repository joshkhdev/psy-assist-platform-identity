@startuml

participant Пользователь as user
participant "Основной Проект (ОП)" as op
participant "Микросервис Аутентификации (МА)" as ma

== Регистрация ==
user -> op : Отправляет данные регистрации
op -> op : Сохраняет данные в БД
op -> user : Подтверждение регистрации

== Логин ==
user -> op : Отправляет учётные данные
op -> op : Проверка учётных данных
alt Данные корректны
    op -> ma : Запрос JWT
    ma -> ma : Генерация JWT
    ma -> op : Отправка JWT
    op -> user : Отправка JWT
else Данные некорректны
    op -> user : Ошибка аутентификации
end

== Использование JWT ==
user -> op : Запрос с JWT на защищённый ресурс
op -> ma : Проверка JWT
ma -> ma : Валидация токена
ma -> op : Результат проверки
op -> user : Доступ разрешён/запрещён

== Обновление токенов ==
user -> op : Запрос обновления токена
op -> ma : Запрос нового JWT
ma -> ma : Генерация нового JWT
ma -> op : Отправка нового JWT
op -> user : Отправка нового JWT

== Отзыв токенов ==
user -> op : Выход из системы/запрос отзыва
op -> ma : Сообщение об отзыве токена
ma -> ma : Добавление токена в список отзыва

@enduml
